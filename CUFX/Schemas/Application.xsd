<?xml version="1.0" encoding="UTF-8"?>
<xs:schema targetNamespace="http://cufxstandards.com/Application.xsd"
  xmlns="http://cufxstandards.com/Application.xsd"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
	xmlns:common="http://cufxstandards.com/Common.xsd"
  xmlns:credit="http://cufxstandards.com/CreditReportDetail.xsd"
  xmlns:party="http://cufxstandards.com/party.xsd"
  
  elementFormDefault="qualified" >

  <xs:import schemaLocation="Common.xsd"	namespace="http://cufxstandards.com/Common.xsd"></xs:import>
  <xs:import namespace="http://cufxstandards.com/party.xsd" schemaLocation="party.xsd" />
  <xs:import namespace="http://cufxstandards.com/CreditReportDetail.xsd" schemaLocation="CreditReportDetail.xsd" />

  <xs:complexType name="Application">
    <xs:sequence>
      <xs:element name="productId" type="xs:string" minOccurs="1" maxOccurs="1"></xs:element>
      <xs:element name="applicantList" type="ApplicantList" minOccurs ="0" maxOccurs ="1">
        <xs:annotation>
          <xs:documentation>
            List of applicants for the product.
          </xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>


  <xs:complexType name="ApplicantList">
    <xs:annotation>
      <xs:documentation>
        List of applicants for the product.
      </xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="applicant" type="Applicant" minOccurs ="0" maxOccurs ="unbounded">
        <xs:annotation>
          <xs:documentation>
            Collection of fields to describe an applicant for the product.
          </xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
 
  <xs:complexType name="Applicant">
    <xs:annotation>
      <xs:documentation>
        Collection of fields to describe an applicant for the product.
      </xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="role" minOccurs="1" maxOccurs="1">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:enumeration value="Primary"></xs:enumeration>
            <xs:enumeration value="Secondary"></xs:enumeration>
            <xs:enumeration value="AuthorizedUser"></xs:enumeration>
          </xs:restriction>
        </xs:simpleType>
      </xs:element>
    <xs:element name="finalCreditBureauScore" type="xs:string" minOccurs="0" maxOccurs="1">
      <xs:annotation>
        <xs:documentation>
          Credit score that was used to approve the application.  This is typically calculated
          using a variety of methods at each financial institution.
        </xs:documentation>
      </xs:annotation>
    </xs:element>
    <xs:element name="creditReportDetail" type="credit:CreditReportDetail" minOccurs="0" maxOccurs="unbounded">
      <xs:annotation>
        <xs:documentation>
          Details relating credit scores used in determining loan approval
        </xs:documentation>
      </xs:annotation>
    </xs:element>
    <xs:element name="PartyId" type="party:PartyId" minOccurs="0" maxOccurs="1">
      <xs:annotation>
        <xs:documentation>
          Key fields to point to an existing party applying for a product.
        </xs:documentation>
      </xs:annotation>
    </xs:element>

    <xs:element name ="party" type ="party:Party"  minOccurs="0" maxOccurs="1">
      <xs:annotation>
        <xs:documentation>
          Use if this application is for a new Party that does not yet exist on the back end systems.
          Contains a list of contacts for how the party would like to be contacted.
          There may be a very limited subset of party data available as this is an application for a new
          party and the amount of information provided for the applicant may be minimal.
        </xs:documentation>
      </xs:annotation>
    </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:schema>